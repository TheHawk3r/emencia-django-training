
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Le chemin d’une requête en Django &#8212; Documentation Formation Django 1.0</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>Il est important d’avoir des URLs bien définies et structurées pour une application web de qualité.</p>
<p>Django vous permet de choisir très précisément vos URLs, sans limitation ou ajout intempestif de suffixes (pas de <code class="docutils literal notranslate"><span class="pre">.php</span></code> à la fin de l’url par exemple)</p>
<div class="section" id="le-chemin-d-une-requete-en-django">
<span id="le-chemin-d-une-requete-en-django"></span><h1>Le chemin d’une requête en Django<a class="headerlink" href="#le-chemin-d-une-requete-en-django" title="Lien permanent vers ce titre">¶</a></h1>
<p>Quand un utilisateur veut afficher la page d’un site réalisé avec Django, le système suit le mécanisme suivant pour déterminer quelle vue sera utilisée.</p>
<ul class="simple">
<li>Django détermine le module de base pour la configuration des URLs. Le nom du module en question se trouve dans les settings (<code class="docutils literal notranslate"><span class="pre">ROOT_URLCONF</span></code>) mais peut également être modifié par un middleware. Ce cas un peu particulier dépasse le cadre de cette introduction et nous pouvons considérer pour l’instant que la racine de vos URLs se trouve donc dans le fichier <code class="docutils literal notranslate"><span class="pre">urls.py</span></code> du dossier portant le nom de votre projet.</li>
<li>Django charge alors ce module et cherche la variable <code class="docutils literal notranslate"><span class="pre">urlpatterns</span></code> qui doit être une liste d’instances de <code class="docutils literal notranslate"><span class="pre">django.conf.urls.url()</span></code>. Une instance comporte au minimum une URL écrit sous forme d’expression régulière (regex) et une vue associée. D’autres arguments peuvent être utilisés comme un nom pour pouvoir</li>
<li>Django parcourt une à une les URLs, dans l’ordre et s’arrête à la première url qui correspond à celle demandée par l’utilisateur</li>
<li>Une fois L’URL trouvée, Django importe et appelle la vue associée qui est une fonction.
La fonction prend en entrée une instance de <code class="docutils literal notranslate"><span class="pre">HttpRequest</span></code></li>
</ul>
<p>Au sein de L’URL peuvent être défini des groupes (avec les expressions régulières), si ceux si ont des noms, ils sont ajoutés en tant que keyword arguments (kwargs) et en arguments simples sinon (args) à la vue.</p>
<p>Si aucune expression régulière d’URL ne correspond, une exception est levé (Http404).</p>
</div>
<div class="section" id="exemple-de-fichier-urls-py">
<span id="exemple-de-fichier-urls-py"></span><h1>Exemple de fichier <code class="docutils literal notranslate"><span class="pre">urls.py</span></code><a class="headerlink" href="#exemple-de-fichier-urls-py" title="Lien permanent vers ce titre">¶</a></h1>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^posts/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">all_blog_entries</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^posts/year/([0-9]{4})/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">blog_entries_by_year</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^posts/year/([0-9]{4})/month/([0-9]{2})/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">blog_entries_by_month</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^posts/detail/(?P&lt;pk&gt;\d+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">blog_entry_detail</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Dans l’exemple ci-dessus:</p>
<ul class="simple">
<li>La première instance d’url correspond à l’url <code class="docutils literal notranslate"><span class="pre">mon_site.com/posts/</span></code> et appellera la fonction <code class="docutils literal notranslate"><span class="pre">views.all_blog_entries(request)</span></code>.</li>
<li>La deuxième instance correspondrait à une url du type <code class="docutils literal notranslate"><span class="pre">mon_site.com/posts/2017/</span></code> et appellera la vue <code class="docutils literal notranslate"><span class="pre">views.blog_entries_by_year(request,</span> <span class="pre">'2017')</span></code> avec l’argument “2017” passé à la requête en tant qu’argument simple.</li>
<li>La dernière instance correspondrait à une url du type <code class="docutils literal notranslate"><span class="pre">mon_site.com/posts/detail/42/</span></code> et appellera la vue avec <code class="docutils literal notranslate"><span class="pre">views.blog_entry_detail(request,</span> <span class="pre">pk=42)</span></code> en tant que «&nbsp;kwargs&nbsp;».</li>
</ul>
<p>Notez que les arguments sont envoyés en tant que chaîne de caractère.
Ne pas oublier non plus que les urls sont testées dans l’ordre et la première expression régulière qui correspond à la requête sera considéré comme étant celle voulue.</p>
</div>
<div class="section" id="inclusion-d-url">
<span id="inclusion-d-url"></span><h1>Inclusion d’URL<a class="headerlink" href="#inclusion-d-url" title="Lien permanent vers ce titre">¶</a></h1>
<p>Chaque application Django peut définir des urls dans un fichier au sein de son application. Nous pouvons ainsi inclure au sein d’un fichier de configuration d’URLs d’autres fichiers d’URLs et ajouter éventuellement un préfixe.</p>
<p>Exemple :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>


<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;other_app/, include(&#39;</span><span class="n">other_app</span><span class="o">.</span><span class="n">urls</span><span class="s1">&#39;)),</span>
    <span class="o">...</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Ainsi, toutes les URLs de l’application sont disponibles dans notre projet et ces URLs seront préfixés par <code class="docutils literal notranslate"><span class="pre">'other_app'</span></code></p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table des Matières</a></h3>
  <ul>
<li><a class="reference internal" href="#">Le chemin d’une requête en Django</a></li>
<li><a class="reference internal" href="#exemple-de-fichier-urls-py">Exemple de fichier <code class="docutils literal notranslate"><span class="pre">urls.py</span></code></a></li>
<li><a class="reference internal" href="#inclusion-d-url">Inclusion d’URL</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/src/Configuration-des-URL.md.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Adrien Brunet.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/src/Configuration-des-URL.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>