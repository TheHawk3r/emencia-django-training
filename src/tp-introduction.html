
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Création d’un virtualenv (virtualenv + virtualenvwrapper) : &#8212; Documentation Formation Django 1.0</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />

  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />


  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            <div class="section" id="sommaire">
              <a href="/emencia-django-training/src/home.html" class="button">SOMMAIRE</a>
            </div>

  <p>Les commandes indiquées sont à utiliser directement dans votre console bash. Ce tutoriel a été écrit pour une machine unix «&nbsp;classique&nbsp;» avec python3 d’installé.</p>
<div class="section" id="creation-d-un-virtualenv-virtualenv-virtualenvwrapper">
<span id="creation-d-un-virtualenv-virtualenv-virtualenvwrapper"></span><h1>Création d’un virtualenv (virtualenv + virtualenvwrapper) :<a class="headerlink" href="#creation-d-un-virtualenv-virtualenv-virtualenvwrapper" title="Lien permanent vers ce titre">¶</a></h1>
<blockquote>
<div>mkvirtualenv –python=/usr/bin/python3 training</div></blockquote>
</div>
<div class="section" id="installation-de-django">
<span id="installation-de-django"></span><h1>Installation de <code class="docutils literal notranslate"><span class="pre">django</span></code><a class="headerlink" href="#installation-de-django" title="Lien permanent vers ce titre">¶</a></h1>
<blockquote>
<div>pip install django</div></blockquote>
<p>la sortie console devrait être similaire à :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Collecting django
  Downloading https://...../Django-1.11.1-py2.py3-none-any.whl (6.9MB)
    100% |████████████████████████████████| 7.0MB 191kB/s
Collecting pytz (from django)
  Using cached https://...../pytz-2017.2-py2.py3-none-any.whl
Installing collected packages: pytz, django
  Successfully installed django-1.11.1 pytz-2017.2
</pre></div>
</div>
<p>Pour garder une trace de nos dépendances, nous allons créer un fichier <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> qui contiendra la liste de nos dépendances. Ainsi, nous pourrons plus tard utiliser directement la commande <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements.txt</span></code> pour installer toutes les dépendances d’un coup.</p>
<p><em>requirements.txt</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Django</span><span class="o">&gt;=</span><span class="mf">1.11</span>
</pre></div>
</div>
</div>
<div class="section" id="initialisation-du-projet">
<span id="initialisation-du-projet"></span><h1>Initialisation du projet :<a class="headerlink" href="#initialisation-du-projet" title="Lien permanent vers ce titre">¶</a></h1>
<blockquote>
<div>django-admin startproject todoz</div></blockquote>
<p>En utilisant la commande <code class="docutils literal notranslate"><span class="pre">ls</span></code>, vous devriez avoir un dossier <code class="docutils literal notranslate"><span class="pre">todoz</span></code>.</p>
<p>Inspectons le dossier :</p>
<blockquote>
<div>tree todoz</div></blockquote>
<p>La sortie console devrait être similaire à :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>todoz
├── manage.py
└── todoz
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    └── wsgi.py
</pre></div>
</div>
</div>
<div class="section" id="initialisation-du-projet-avec-git">
<span id="initialisation-du-projet-avec-git"></span><h1>Initialisation du projet avec <code class="docutils literal notranslate"><span class="pre">git</span></code> :<a class="headerlink" href="#initialisation-du-projet-avec-git" title="Lien permanent vers ce titre">¶</a></h1>
<ul class="simple">
<li>Créer un projet sur github/bitbucket/gitlab</li>
<li>Suivre les instructions pour lier votre projet avec votre dossier git</li>
</ul>
<p>Exemple :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">todoz</span>
<span class="n">git</span> <span class="n">init</span>
<span class="n">git</span> <span class="n">remote</span> <span class="n">add</span> <span class="n">origin</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">emencia</span><span class="o">/</span><span class="n">emencia</span><span class="o">-</span><span class="n">django</span><span class="o">-</span><span class="n">training</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>Vous pouvez maintenant suivre les évolutions des modifications avec par exemple :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">status</span>
<span class="n">git</span> <span class="n">diff</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Pour éviter de polluer l’application avec des fichiers de cache ou autre base de données de tests, nous allons exclure des fichiers de git.
Pour cela, créez un fichier <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code></p>
<blockquote>
<div>touch .gitignore</div></blockquote>
<p>Editer votre fichier pour ajouter le contenu suivant:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Byte-compiled / optimized / DLL files
__pycache__/
*.py[cod]
*$py.class

# Vim
*.sw?

# C extensions
*.so

# Distribution / packaging
.Python
env/
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
/parts/
*.egg-info/
.installed.cfg
*.egg

# PyInstaller
#  Usually these files are written by a python script from a template
#  before PyInstaller builds the exe, so as to inject date/other infos into it.
*.manifest
*.spec

# Installer logs
pip-log.txt
pip-delete-this-directory.txt

# Unit test / coverage reports
htmlcov/
.tox/
.coverage
.coverage.*
.cache
nosetests.xml
coverage.xml
*,cover
.hypothesis/

# Translations
*.mo
*.pot

# virtualenv
.venv/
venv/
ENV/

# database
db.sqlite3

# user uploaded media
media/*

# Data and media dumps
*.sql
*.gz
</pre></div>
</div>
</div>
<div class="section" id="tester-l-application">
<span id="tester-l-application"></span><h1>Tester l’application<a class="headerlink" href="#tester-l-application" title="Lien permanent vers ce titre">¶</a></h1>
<p>On peut maintenant lancer les tests en se plaçant à la racine de notre projet et en effectuant la commande suivante:</p>
<blockquote>
<div>python manage.py test</div></blockquote>
<p>La sortie doit être similaire à :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Creating</span> <span class="n">test</span> <span class="n">database</span> <span class="k">for</span> <span class="n">alias</span> <span class="s1">&#39;default&#39;</span><span class="o">...</span>
<span class="n">System</span> <span class="n">check</span> <span class="n">identified</span> <span class="n">no</span> <span class="n">issues</span> <span class="p">(</span><span class="mi">0</span> <span class="n">silenced</span><span class="p">)</span><span class="o">.</span>

<span class="o">------------------------------------------------------------</span>
<span class="n">Ran</span> <span class="mi">0</span> <span class="n">tests</span> <span class="ow">in</span> <span class="mf">0.000</span><span class="n">s</span>

<span class="n">OK</span>
<span class="n">Destroying</span> <span class="n">test</span> <span class="n">database</span> <span class="k">for</span> <span class="n">alias</span> <span class="s1">&#39;default&#39;</span><span class="o">...</span>
</pre></div>
</div>
<p>Nous remarquons ici qu’une base de données a été créée pour l’occasion mais elle a été supprimée à la fin des tests.
Nous n’avons écrit aucun test pour le moment, l’application n’en a donc trouvé et exécuté aucun. Le statut retourné est <code class="docutils literal notranslate"><span class="pre">OK</span></code>.</p>
</div>
<div class="section" id="lancement-du-serveur-local">
<span id="lancement-du-serveur-local"></span><h1>Lancement du serveur local<a class="headerlink" href="#lancement-du-serveur-local" title="Lien permanent vers ce titre">¶</a></h1>
<blockquote>
<div>python manage.py runserver</div></blockquote>
<p>Vous devriez avoir une sortie similaire à :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Performing</span> <span class="n">system</span> <span class="n">checks</span><span class="o">...</span>

<span class="n">System</span> <span class="n">check</span> <span class="n">identified</span> <span class="n">no</span> <span class="n">issues</span> <span class="p">(</span><span class="mi">0</span> <span class="n">silenced</span><span class="p">)</span><span class="o">.</span>

<span class="n">You</span> <span class="n">have</span> <span class="mi">13</span> <span class="n">unapplied</span> <span class="n">migration</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span> <span class="n">Your</span> <span class="n">project</span> <span class="n">may</span> <span class="ow">not</span> <span class="n">work</span> <span class="n">properly</span> <span class="n">until</span> <span class="n">you</span> <span class="n">apply</span> <span class="n">the</span> <span class="n">migrations</span> <span class="k">for</span> <span class="n">app</span><span class="p">(</span><span class="n">s</span><span class="p">):</span> <span class="n">admin</span><span class="p">,</span> <span class="n">auth</span><span class="p">,</span> <span class="n">contenttypes</span><span class="p">,</span> <span class="n">sessions</span><span class="o">.</span>
<span class="n">Run</span> <span class="s1">&#39;python manage.py migrate&#39;</span> <span class="n">to</span> <span class="n">apply</span> <span class="n">them</span><span class="o">.</span>

<span class="n">May</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">2017</span> <span class="o">-</span> <span class="mi">15</span><span class="p">:</span><span class="mi">26</span><span class="p">:</span><span class="mi">08</span>
<span class="n">Django</span> <span class="n">version</span> <span class="mf">1.11</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="n">using</span> <span class="n">settings</span> <span class="s1">&#39;todoz.settings&#39;</span>
<span class="n">Starting</span> <span class="n">development</span> <span class="n">server</span> <span class="n">at</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span>
<span class="n">Quit</span> <span class="n">the</span> <span class="n">server</span> <span class="k">with</span> <span class="n">CONTROL</span><span class="o">-</span><span class="n">C</span><span class="o">.</span>
</pre></div>
</div>
<p>Comme indiqué, nous pouvons arrêter ce serveur à tout moment avec <code class="docutils literal notranslate"><span class="pre">CTRL</span> <span class="pre">+</span> <span class="pre">C</span></code>.
Le serveur utilise l’adresse <code class="docutils literal notranslate"><span class="pre">127.0.0.1:8000</span></code> (défaut). Si vous allez dans votre navigateur à cette adresse, vous devriez voir une page indiquant:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>It worked!
Congratulations on your first Django-powered page.

Next, start your first app by running python manage.py startapp [app_label].

You&#39;re seeing this message because you have DEBUG = True in your Django settings file and you haven&#39;t configured any URLs. Get to work!
</pre></div>
</div>
<p>Voici une capture d’écran du résultat :
<img alt="Capture d'écran de l'application" src="https://docs.google.com/drawings/d/1WXc5jgxeXomSrX6aL-foucNh4DXshXXw4s7cSfIuc9g/pub?w=925&amp;h=193" /></p>
<p>C’est une bonne nouvelle, voici la première page du site. Elle nous invite à nout mettre au boulot… Allons-y !</p>
<p>On peut remarquer que nous avons une ligne en erreur lors du lancement du serveur :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">You</span> <span class="n">have</span> <span class="mi">13</span> <span class="n">unapplied</span> <span class="n">migration</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span>

<span class="n">Your</span> <span class="n">project</span> <span class="n">may</span> <span class="ow">not</span> <span class="n">work</span> <span class="n">properly</span> <span class="n">until</span> <span class="n">you</span> <span class="n">apply</span> <span class="n">the</span> <span class="n">migrations</span> <span class="k">for</span> <span class="n">app</span><span class="p">(</span><span class="n">s</span><span class="p">):</span> <span class="n">admin</span><span class="p">,</span> <span class="n">auth</span><span class="p">,</span> <span class="n">contenttypes</span><span class="p">,</span> <span class="n">sessions</span><span class="o">.</span>

<span class="n">Run</span> <span class="s1">&#39;python manage.py migrate&#39;</span> <span class="n">to</span> <span class="n">apply</span> <span class="n">them</span><span class="o">.</span>
</pre></div>
</div>
<p>Nous verrons plus tard comment fonctionnent les migrations en django. Pour l’instant, nous pouvons suivre le conseil qui nous est donné :</p>
<blockquote>
<div>python manage.py migrate</div></blockquote>
<p>Vous devriez avoir la sortie suivante :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Operations</span> <span class="n">to</span> <span class="n">perform</span><span class="p">:</span>
  <span class="n">Apply</span> <span class="nb">all</span> <span class="n">migrations</span><span class="p">:</span> <span class="n">admin</span><span class="p">,</span> <span class="n">auth</span><span class="p">,</span> <span class="n">contenttypes</span><span class="p">,</span> <span class="n">sessions</span>
<span class="n">Running</span> <span class="n">migrations</span><span class="p">:</span>
  <span class="n">Applying</span> <span class="n">contenttypes</span><span class="o">.</span><span class="mi">0001</span><span class="n">_initial</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">auth</span><span class="o">.</span><span class="mi">0001</span><span class="n">_initial</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">admin</span><span class="o">.</span><span class="mi">0001</span><span class="n">_initial</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">admin</span><span class="o">.</span><span class="mi">0002</span><span class="n">_logentry_remove_auto_add</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">contenttypes</span><span class="o">.</span><span class="mi">0002</span><span class="n">_remove_content_type_name</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">auth</span><span class="o">.</span><span class="mi">0002</span><span class="n">_alter_permission_name_max_length</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">auth</span><span class="o">.</span><span class="mi">0003</span><span class="n">_alter_user_email_max_length</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">auth</span><span class="o">.</span><span class="mi">0004</span><span class="n">_alter_user_username_opts</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">auth</span><span class="o">.</span><span class="mi">0005</span><span class="n">_alter_user_last_login_null</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">auth</span><span class="o">.</span><span class="mi">0006</span><span class="n">_require_contenttypes_0002</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">auth</span><span class="o">.</span><span class="mi">0007</span><span class="n">_alter_validators_add_error_messages</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">auth</span><span class="o">.</span><span class="mi">0008</span><span class="n">_alter_user_username_max_length</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">sessions</span><span class="o">.</span><span class="mi">0001</span><span class="n">_initial</span><span class="o">...</span> <span class="n">OK</span>
</pre></div>
</div>
<p>Si on relance le serveur :</p>
<blockquote>
<div>python manage.py runserver</div></blockquote>
<p>Nous avons maintenant :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Performing</span> <span class="n">system</span> <span class="n">checks</span><span class="o">...</span>

<span class="n">System</span> <span class="n">check</span> <span class="n">identified</span> <span class="n">no</span> <span class="n">issues</span> <span class="p">(</span><span class="mi">0</span> <span class="n">silenced</span><span class="p">)</span><span class="o">.</span>

<span class="n">May</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">2017</span> <span class="o">-</span> <span class="mi">15</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">18</span>
<span class="n">Django</span> <span class="n">version</span> <span class="mf">1.11</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="n">using</span> <span class="n">settings</span> <span class="s1">&#39;todoz.settings&#39;</span>
<span class="n">Starting</span> <span class="n">development</span> <span class="n">server</span> <span class="n">at</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span>
<span class="n">Quit</span> <span class="n">the</span> <span class="n">server</span> <span class="k">with</span> <span class="n">CONTROL</span><span class="o">-</span><span class="n">C</span><span class="o">.</span>
</pre></div>
</div>
<p>Il n’y a plus d’erreur !</p>
</div>
<div class="section" id="mettre-nos-avancees-sur-git">
<span id="mettre-nos-avancees-sur-git"></span><h1>Mettre nos avancées sur git<a class="headerlink" href="#mettre-nos-avancees-sur-git" title="Lien permanent vers ce titre">¶</a></h1>
<p>Nous pouvons remarquer que notre projet n’est pas synchronisé avec git.
Avant de conclure, effectuons notre premier commit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="o">.</span>

<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;Premier commit : initialisation du projet django todoz&quot;</span>

<span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">master</span>
</pre></div>
</div>
<p>Vous devriez avoir un résultat similaire à celui présent sur <a class="reference external" href="https://github.com/emencia/emencia-django-training/tree/introduction/">ce lien</a></p>
</div>
<div class="section" id="conclusion">
<span id="conclusion"></span><h1>Conclusion<a class="headerlink" href="#conclusion" title="Lien permanent vers ce titre">¶</a></h1>
<ul class="simple">
<li>Nous avons installé avec succès <code class="docutils literal notranslate"><span class="pre">django</span></code> en utilisant un environnement virtuel de déploiement via <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code></li>
<li>Nous avons créée notre projet avec la commande <code class="docutils literal notranslate"><span class="pre">django-admin</span></code></li>
<li>Nous avons initialisé notre projet via <code class="docutils literal notranslate"><span class="pre">git</span></code></li>
<li>Nous avons effectué les migrations django et sommes capable de lancer le serveur en local</li>
</ul>
</div>
<div class="section" id="footer">
  <a href="/emencia-django-training/src/outils-developpement.html" class="button left">PRÉCEDENT</a>
  <a href="/emencia-django-training/src/applications-django.html" class="button right">SUIVANT</a>
</div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table des Matières</a></h3>
  <ul>
<li><a class="reference internal" href="#">Création d’un virtualenv (virtualenv + virtualenvwrapper) :</a></li>
<li><a class="reference internal" href="#installation-de-django">Installation de <code class="docutils literal notranslate"><span class="pre">django</span></code></a></li>
<li><a class="reference internal" href="#initialisation-du-projet">Initialisation du projet :</a></li>
<li><a class="reference internal" href="#initialisation-du-projet-avec-git">Initialisation du projet avec <code class="docutils literal notranslate"><span class="pre">git</span></code> :</a></li>
<li><a class="reference internal" href="#tester-l-application">Tester l’application</a></li>
<li><a class="reference internal" href="#lancement-du-serveur-local">Lancement du serveur local</a></li>
<li><a class="reference internal" href="#mettre-nos-avancees-sur-git">Mettre nos avancées sur git</a></li>
<li><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/src/TP---Introduction.md.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Adrien Brunet.

      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>

      |
      <a href="../_sources/src/TP---Introduction.md.txt"
          rel="nofollow">Page source</a>
    </div>




  </body>
</html>
